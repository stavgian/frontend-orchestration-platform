<ng-container *ngIf="!loadingManifest; else loading">
  <div class="page single-column">
    <section class="workspace full">
      <router-outlet></router-outlet>
    </section>

    <section class="event-log">
      <header>
        <div class="title">Event Log</div>
        <div class="subtitle">Listening to status messages</div>
      </header>
      <div class="log-list">
        <div class="log-empty" *ngIf="!logs.length">No events yet.</div>
        <div class="log-entry" *ngFor="let log of logs">
          <div class="log-meta">
            <span class="badge">{{ log.name }}</span>
            <span class="time">{{ log.timestamp | date: 'shortTime' }}</span>
          </div>
          <div class="message" *ngIf="log.message">{{ log.message }}</div>
          <div class="source" *ngIf="log.source || log.emittedAt">
            {{ log.source || 'unknown source' }}
            <ng-container *ngIf="log.emittedAt"> · {{ log.emittedAt | date:'shortTime' }}</ng-container>
          </div>
          <pre>{{ log.payload | json }}</pre>
        </div>
      </div>
    </section>
  </div>
</ng-container>

<ng-template #loading>
  <div class="loading-state">Loading manifest…</div>
</ng-template>
